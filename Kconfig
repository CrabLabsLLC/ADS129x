# Copyright (c) 2025 Makani Science
# SPDX-License-Identifier: Apache-2.0

menuconfig ADS1293
	bool "ADS1293 ECG Analog Front-End driver"
	default y
	depends on DT_HAS_TI_ADS1293_ENABLED
	depends on SPI
	select GPIO
	help
	  Enable driver for Texas Instruments ADS1293 3-channel, 24-bit
	  low-power analog front-end for ECG applications.

if ADS1293

config ADS1293_INIT_PRIORITY
	int "ADS1293 initialization priority"
	default 90
	help
	  Device initialization priority for ADS1293.
	  Should be higher than SPI bus priority.

config ADS1293_LOG_LEVEL
	int "ADS1293 log level"
	default 3
	range 0 4
	help
	  Sets log level for ADS1293 driver.
	  0 = OFF, 1 = ERR, 2 = WRN, 3 = INF, 4 = DBG

config ADS1293_LEAD_OFF_DETECTION
	bool "Enable lead-off detection"
	default y
	help
	  Enable electrode lead-off detection feature.
	  Useful for detecting disconnected electrodes.

config ADS1293_LEAD_OFF_AC_ENABLE
	bool "Enable AC lead-off detection"
	default n
	help
	  Enable AC lead-off detection mode (in addition to DC if enabled).
	  Reset value is disabled.

config ADS1293_LEAD_OFF_THRESHOLD
	int "Lead-off comparator threshold (0-7)"
	range 0 7
	default 0
	help
	  Lead-off comparator threshold. Reset value is 0.

config ADS1293_LEAD_OFF_CURRENT
	hex "Lead-off detection current"
	range 0x0 0xff
	default 0x00
	help
	  Lead-off detection current magnitude (register value).
	  Reset value is 0x00.

config ADS1293_LEAD_OFF_INPUT_MASK
	hex "Lead-off input mask"
	range 0x0 0xff
	default 0x00
	help
	  Bitmask of inputs to monitor for lead-off detection.
	  Reset value is 0x00.

config ADS1293_RLD_ENABLE
	bool "Enable Right Leg Drive"
	default y
	help
	  Enable the Right Leg Drive (RLD) amplifier for
	  common-mode noise rejection.

config ADS1293_SAMPLE_RATE
	int "Default sample rate (Hz)"
	default 256
	range 50 1024
	help
	  Default ECG sample rate in Hz.
	  The driver calculates the closest achievable rate using the
	  R1, R2, R3 decimation factors.

	  Common values:
	    256 Hz (default) - standard ECG
	    512 Hz - higher resolution
	    1024 Hz - maximum resolution

	  Actual rate depends on clock source (internal or external).

config ADS1293_HIRES_MASK
	hex "AFE high-resolution enable mask (EN_HIRES_CHx)"
	default 0x0
	range 0x0 0x7
	help
	  Bitmask enabling high-resolution mode per channel in AFE_RES.
	  Bit 0 = CH1, bit 1 = CH2, bit 2 = CH3. Reset value is 0.

config ADS1293_FS_HIGH_MASK
	hex "AFE high-frequency clock mask (FS_HIGH_CHx)"
	default 0x0
	range 0x0 0x7
	help
	  Bitmask enabling 204.8 kHz modulator clock per channel in AFE_RES.
	  Bit 0 = CH1, bit 1 = CH2, bit 2 = CH3. Reset value is 0.

config ADS1293_DRDY_IRQ_ENABLE
	bool "Enable DRDY interrupt GPIO support"
	default y
	help
	  Enable support for the DRDY (Data Ready) pin interrupt functionality.
	  When disabled, the driver will not configure or use the DRDY GPIO
	  for interrupts even if specified in devicetree. Use polling instead.
	  Disable this if the DRDY pin is not connected or not needed.

config ADS1293_ALARM_IRQ_ENABLE
	bool "Enable ALARM interrupt GPIO support"
	default y
	help
	  Enable support for the ALARM pin interrupt functionality.
	  When disabled, the driver will not configure or use the ALARM GPIO
	  for interrupts even if specified in devicetree.
	  Disable this if the ALARM pin is not connected or not needed.

endif # ADS1293
